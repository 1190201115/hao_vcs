<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../js/outService.js"></script>
</head>
<body >
<div id="app">
    <el-image
            style="height: 100%;"
            :src="pic_url"
            >
    </el-image>
    <div style="display: flex;justify-content: center;background-color: aquamarine">
        <canvas id="canvas"></canvas>
    </div>
    <el-button @click="test()">开始</el-button>
</div>
<script>
    var vm = new Vue({
        el: "#app",
        data() {
            return {
                pic_url :'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',
            }
        },
        methods: {
            test(){
                let canvas = document.getElementById('canvas')
                let cut = canvas.getContext('2d')
                let edit_img = new Image();
                edit_img.src = this.pic_url;
                edit_img.crossOrigin = 'Anonymous';
                edit_img.onload = function () {
                    cut.drawImage(edit_img, 0, 0, 800, 400);
                    cut.font="20px Georgia";
                    cut.fillStyle = '#ddd'
                    cut.fillText('aaaaa',50,50);
                };
                let self = this
                console.log(self)
                setTimeout(function () {
                    self.pic_url = canvas.toDataURL('image/jpeg');
                }, 500);
                //onwaiting(10)

                // var cvs = document.getElementById('canvas')
                // let ctx = cvs.getContext('2d')
                // ctx.fillStyle = "yellow";
                // ctx.fillRect(0, 0, 300, 400);
                // this.pic_url = cvs.toDataURL('image/jpeg');
            }


        }
    })
</script>
</body>
</html>